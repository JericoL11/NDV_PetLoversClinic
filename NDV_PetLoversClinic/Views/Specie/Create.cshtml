@model NDV_PetLoversClinic.Models.Records.Specie
@{
    ViewData["Title"] = "Create Specie";
}
<div class="bg-secondary bg-opacity-10 mb-3 py-2">
    <div class="container">
        <h1>Create Specie</h1>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-6">
            <div class="card">
                <div class="card-header"> Fill-up Form </div>
                <form method="post" asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger my-2"></div>
                  
                <div class="card-body">
                    <div class="form-group">
                        <label class="control-label">Specie Name</label>
                        <input class="form-control" asp-for="specie_Name" required />
                    </div>
                </div>
                    
                <div class="card-header">Breed</div>
                <div class="text-end pt-3 pe-2">
                        <button type="button" id="addBreedRow" class="btn btn-outline-primary mt-2">Add Breed</button>

                </div>
                <div class="card-body">
                        <div id="breedRow">
                            <div class="form-group d-flex align-items-center mb-2">
                                <input class="form-control" name="Breeds[0].breed_Name" placeholder="Breed Name" required />
                                <button type="button" class="btn btn-outline-danger border-0 removeRow ms-2">
                                    <i class="bi bi-trash-fill"></i>
                                </button>
                            </div>
                        </div>

                </div>
                    <div class="my-3">
                        <a asp-action="Index" class="btn btn-secondary">Cancel</a>
                        <input type="submit" class="btn btn-primary" value="Create" />
                    </div>
                </form>
            </div>
        </div>
        
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $(document).ready(function () {
            let breedIndex = 1; // Initialize index for new breed rows

            // Add breed row
            $('#addBreedRow').on('click', function () {
                const rowCount = $('#breedRow .form-group').length;

                // Allow adding row only if there are less than 5 rows
                if (rowCount < 5) {
                    const newBreedRow = `
                            <div class="form-group d-flex align-items-center mb-2">
                                <input class="form-control" name="Breeds[${breedIndex}].breed_Name" placeholder="Breed Name" required />
                                <button type="button" class="btn btn-outline-danger border-0 removeRow ms-2">
                                    <i class="bi bi-trash-fill"></i>
                                </button>
                            </div>
                        `;
                    $('#breedRow').append(newBreedRow);
                    breedIndex++; // Increment index for next breed row
                } else {
                    alert('You can only add up to 5 rows.');
                }
            });

            // Remove breed row
            $('#breedRow').on('click', '.removeRow', function () {
                const rowCount = $('#breedRow .form-group').length;

                // Allow removal only if there are more than 1 row
                if (rowCount > 1) {
                    $(this).closest('.form-group').remove();

                    // Re-adjust the indexes after removing a row
                    $('#breedRow .form-group').each(function (index) {
                        $(this).find('input').attr('name', `Breeds[${index}].breed_Name`);
                    });
                    breedIndex--; // Decrement index after removing a row
                } else {
                    alert('At least one breed row must remain.');
                }
            });
        });
    </script>
}
